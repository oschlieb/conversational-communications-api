#!/bin/bash

RED=$(tput setaf 1)
NORMAL=$(tput sgr0)

# I NEED TO FIGURE OUT HOW TO READ THE CONTENTS OF THIS FILE AND ENSURE IT MATCHES THE REGEX
MSG=`cat $1` # This prints
regex="CSJ-[0-9]{1,5}($|[^0-9])"

# If the commit message does not match the regex
if ! [[ "$MSG" =~ $regex ]]; then
  echo "${RED}ERROR - Missing ticket number at the start of commmit message. e.g: $NORMAL"
  echo "CSJ-123 $MSG"
  exit 1
else
  exit 0
fi
