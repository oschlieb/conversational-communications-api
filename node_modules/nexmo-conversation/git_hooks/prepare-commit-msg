#!/bin/bash

regex="(CSJ|VAPI)-[0-9]{1,5}$"

CUR_BRANCH=$(git branch|grep \*| awk '{print $2}')
TICKT_FROM_BRANCH=$(echo $CUR_BRANCH | awk -F __ '{  print $2}' )

MSG="$(cat $1)"
TICKET_FROM_MSG=$(echo $MSG | awk '{ print $1 }' )

! [[ "$TICKET_FROM_MSG" =~ $regex ]] && [[ "$TICKT_FROM_BRANCH" =~ $regex ]] && MSG="$TICKT_FROM_BRANCH $MSG"

echo "$MSG" > "$1"
